<div>
  <div class="container">
    <div class="row">
      <div class="col-sm-4 d-flex flex-column">
        <div>
          <p>Tipo di scarico</p>
          <div class="drain-choice-container">
            <div id="drain-choice-canalina" class="drain-choice" [ngClass]="{'selected': searchCriteria.trayType=='L'}"
              (click)="setTrayType('L')">
            </div>
            <div id="drain-choice-puntuale" class="drain-choice" [ngClass]="{'selected': searchCriteria.trayType=='P'}"
              (click)="setTrayType('P')"></div>
          </div>
        </div>
        <hr>
        <div>
          <p>Altezza utile massetto</p>
          <div class="btn-group btn-group-toggle d-flex justify-content-center" ngbRadioGroup name="screedHeight"
            [(ngModel)]="searchCriteria.screedThickness">
            <label ngbButtonLabel class="btn-primary">
              <input ngbButton type="radio" value="99">{{messages['lessThan10']}}
            </label>
            <label ngbButtonLabel class="btn-primary">
              <input ngbButton type="radio" value="200">{{messages['greaterEqual10']}}
            </label>
          </div>
          <hr>
        </div>
        <div *ngIf="!disableProfilesChoice">
          <p>Altezza rivestimento</p>
          <div class="form-group">
            <input type="number" [(ngModel)]="searchCriteria.profiles.tileHeight" type="number" class="form-control"
              id="tile-height" aria-describedby="tile-height">
            <small id="tile-height-help" class="form-text text-muted">{{messages.tileHeightHelp}}</small>
          </div>
          <hr>
        </div>
        <div>
          <p>Dimensioni:</p>
          <div>
            <div class="form-group">
              <label for="width"><b>{{ sizeLabel.width }}</b>(mm)</label>
              <input type="number" (change)="onWidthChange()" [(ngModel)]="searchCriteria.wMin" type="number"
                class="form-control" #trayWidthField aria-describedby="widthError"
                [ngClass]="{'is-invalid': widthError}">
              <div *ngIf="widthError" id="widthError" class="invalid-feedback">
                {{widthError}}
              </div>
              <small id="width-help" class="form-text text-muted"></small>
            </div>
            <div class="form-group">
              <label for="length"><b>{{ sizeLabel.length }}</b>(mm)</label>
              <input type="number" (change)="onLengthChange()" [(ngModel)]="searchCriteria.lMin" type="number"
                class="form-control" #trayLengthField aria-describedby="lengthError"
                [ngClass]="{'is-invalid': lengthError}">
              <div *ngIf="lengthError" id="lengthError" class="invalid-feedback">
                {{lengthError}}
              </div>
              <small id="length-help" class="form-text text-muted"></small>
            </div>
          </div>
        </div>
        <div>
          <button id="search" class="btn btn-primary" (click)="doSearch()">
            {{ searchCaption }}
          </button>
          <button *ngIf="searchPerformed" class="btn btn-primary" id="nuovo" (click)="doNew()">
            Nuova ricerca
          </button>
        </div>
        <div>
          <table>
            <tr>
              <td></td>
              <td style="text-align: center">
                <mat-radio-group name="profilesNorth" labelPosition="after" [(ngModel)]="searchCriteria.profiles.north"
                  [disabled]="disableProfilesChoice">
                  <mat-radio-button value="wall" checked>Muro</mat-radio-button>
                  <br>
                  <mat-radio-button value="floor">Pavimento</mat-radio-button>
                </mat-radio-group>
              </td>
              <td></td>
            </tr>
            <tr>
              <td>
                <mat-radio-group name="profilesWest" labelPosition="after" [(ngModel)]="searchCriteria.profiles.west"
                  [disabled]="disableProfilesChoice">
                  <mat-radio-button value="wall" checked>Muro</mat-radio-button>
                  <br>
                  <mat-radio-button value="floor">Pavimento</mat-radio-button>
                </mat-radio-group>
              </td>
              <td>
                <app-trays [showDrain]="showDrain" [trayWidth]="searchCriteria.wMin" [trayLength]="searchCriteria.lMin">
                </app-trays>
              </td>
              <td>
                <mat-radio-group name="profilesEst" labelPosition="after" [(ngModel)]="searchCriteria.profiles.est"
                  [disabled]="disableProfilesChoice">
                  <mat-radio-button value="wall">Muro</mat-radio-button>
                  <br>
                  <mat-radio-button value="floor" checked>Pavimento</mat-radio-button>
                </mat-radio-group>
              </td>
            </tr>
          </table>
        </div>
      </div>
      <div class="col-sm-8">
        <table width="100%">
          <tr>
            <td>
              <div *ngIf="dataSource.data.length > 0" style="color: blue;">
                Cliccare sul risultato prescelto per vederne i dettagli
              </div>
              <div *ngIf="dataSource.data.length == 0 && searchPerformed" style="color: red;">
                Nessun piatto soddisfa i requisiti richiesti. Cambiarli se possibile o contaatare
                <br>
                il supporto tecnico di wedi allo 039 245 9420 per eventuali altre soluzioni
              </div>
            </td>
          </tr>
          <tr>
            <td colspan=2>
              <mat-table [dataSource]="dataSource">
                <ng-container matColumnDef="articleNumber">
                  <mat-header-cell *matHeaderCellDef>Articolo</mat-header-cell>
                  <mat-cell *matCellDef="let tray">{{ tray.articleNumber }}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="description">
                  <mat-header-cell *matHeaderCellDef>Descrizione</mat-header-cell>
                  <mat-cell *matCellDef="let tray">{{ tray.description }}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="trayType">
                  <mat-header-cell *matHeaderCellDef>P/L</mat-header-cell>
                  <mat-cell *matCellDef="let tray">{{ tray.trayType }}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="drainType">
                  <mat-header-cell *matHeaderCellDef>I/E</mat-header-cell>
                  <mat-cell *matCellDef="let tray">{{ tray.drainType }}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="size">
                  <mat-header-cell *matHeaderCellDef>Dimensioni</mat-header-cell>
                  <mat-cell *matCellDef="let tray">
                    {{ tray.length }} x {{ tray.width }} x {{ tray.thickness }}mm
                  </mat-cell>
                </ng-container>
                <ng-container matColumnDef="width">
                  <mat-header-cell *matHeaderCellDef>Larg</mat-header-cell>
                  <mat-cell *matCellDef="let tray">{{ tray.width }}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="length">
                  <mat-header-cell *matHeaderCellDef>Lung</mat-header-cell>
                  <mat-cell *matCellDef="let tray">{{ tray.length }}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="thickness">
                  <mat-header-cell *matHeaderCellDef>Spes</mat-header-cell>
                  <mat-cell *matCellDef="let tray">{{ tray.thickness }}</mat-cell>
                </ng-container>
                <ng-container matColumnDef="price">
                  <mat-header-cell *matHeaderCellDef>Prezzo</mat-header-cell>
                  <mat-cell *matCellDef="let tray">
                    {{ tray.price | number: "1.2-2" }}
                  </mat-cell>
                </ng-container>

                <mat-header-row *matHeaderRowDef="getDisplayedColumns()"></mat-header-row>
                <mat-row *matRowDef="let row; columns: getDisplayedColumns()" (click)="openArticle(row)"></mat-row>
              </mat-table>
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</div>